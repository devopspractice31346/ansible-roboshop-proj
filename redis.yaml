- name: Install redis component
  hosts: redis
  become: yes
  tasks:
  - name: Installing redis:remi-6.2 packages
    #ansible.builtin.shell: "curl -sL https://rpms.remirepo.net/enterprise/remi-release-8.rpm | bash"
    ansible.builtin.yum:
      name: redis:remi-6.2
      state: installed

  - name: check roboshop user exist or not
    ansible.builtin.command: id roboshop
    register: out #output is variable name
    ignore_errors: true

  - when: out.rc != 0
    name: create user roboshop
    become: yes # we need sudo access for this task only
    ansible.builtin.user:
      name: roboshop